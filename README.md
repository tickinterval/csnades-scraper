# CSNADES.gg grenade scraper → `setpos`/`setang` (CS2)

Мини‑скрипт для выгрузки гранат с `https://csnades.gg/` по выбранной карте и сохранения **готовых команд CS2**:

```
setpos ...;setang ...
```

Подходит для личного использования: быстро собрать себе `.cfg`/`.txt` с позициями и углами для тренировки.

---

## Возможности

- Берёт **все гранаты карты** со страницы карты.
- Для каждой гранаты открывает её страницу и вытаскивает поле **`console`**.
- Экспортирует результат в файл (`.cfg` или `.txt`) + добавляет удобные комментарии (тип/команда/откуда→куда/ссылка).
- Есть ограничение параллелизма (`--limit`) и лимит на количество гранат для отладки (`--max`).

---

## Требования

- **Node.js 18+** (у вас подойдёт и Node 20+).
- Windows PowerShell / любой терминал.

---

## Быстрый старт

### 1) Скачать/скопировать файл

Положите `csnades-scraper.mjs` рядом с `README.md` (в корень папки проекта).

### 2) Сгенерировать конфиг для карты

```powershell
node .\csnades-scraper.mjs --map mirage --out mirage.cfg
```

Пример для Inferno:

```powershell
node .\csnades-scraper.mjs --map inferno --out inferno.cfg
```

---

## Аргументы CLI

- `--map <slug>` — слаг карты на csnades.gg (например: `mirage`, `inferno`, `dust2`).
- `--out <path>` — файл результата (по умолчанию `<map>.cfg`).
- `--limit <n>` — сколько страниц гранат качать параллельно (по умолчанию `6`).
- `--max <n>` — ограничить количество гранат (удобно для проверки).
- `--base <url>` — базовый URL (по умолчанию `https://csnades.gg`).

Можно также передать карту первым аргументом:

```powershell
node .\csnades-scraper.mjs inferno
```

---

## Что получится на выходе

Файл будет выглядеть примерно так:

```cfg
// smoke | T | Tetris -> Ticket Booth
// https://csnades.gg/mirage/smokes/ticket-booth-from-tetris
setpos -31.915405 -1418.031250 -104.374969;setang -32.572208 -116.919746 0.000000
```

Если у какой-то гранаты поле `console` не нашлось, скрипт пометит её строкой `// MISSING_CONSOLE`.

---

## Troubleshooting

**Нашло 0 гранат / упало с “site layout may have changed”**

- Скорее всего сайт обновился. Дай ссылку на карту/гранату — подправлю парсер под новую разметку.

**Ошибки HTTP (403/429/5xx)**

- Уменьшите параллелизм: `--limit 2` или `--limit 1`.
- Повторите запуск.

**Как понять, какой `--map` нужен**

- Откройте карту на сайте и посмотрите URL, например:
  - `https://csnades.gg/inferno` → `--map inferno`

---

## Примечания

- Скрипт ходит по публичным страницам и берёт только текстовые данные `console`.
- Уважайте правила сайта и не делайте агрессивный спам запросами (для этого есть `--limit`).
